<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How Far From Potty</title>
    <meta
      name="description"
      content="Find out how far you are from the nearest public toilet in the UK or US."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./vendor/leaflet/leaflet.css" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <section class="hero">
        <p class="eyebrow">UK + US</p>
        <h1>How Far From Potty?</h1>
        <p class="lead">
          Share your location to see the nearest public toilets in the UK or US, with distance and key access details.
        </p>
        <div class="hero-actions">
          <button id="locate-button" type="button">Use My Current Location</button>
          <button id="feature-request-button" type="button" class="ghost-button">Feature Request</button>
        </div>
        <p id="status" class="status" role="status" aria-live="polite"></p>
      </section>

      <section class="panel">
        <h2>Nearest Toilets</h2>
        <p id="current-location" class="location-line"></p>
        <ul id="results" class="results" aria-live="polite"></ul>
      </section>

      <section class="panel map-panel">
        <h2>Map View</h2>
        <p class="location-line">Your location and closest toilets are plotted below.</p>
        <div id="toilet-map" class="map" aria-label="Map showing nearest public toilets"></div>
      </section>
    </main>

    <dialog id="feature-request-dialog" class="feature-dialog">
      <form id="feature-request-form" class="feature-form" method="dialog">
        <div class="feature-header">
          <h2>Feature Request</h2>
          <button type="button" id="close-feature-request" class="dialog-close" aria-label="Close">
            x
          </button>
        </div>
        <p class="feature-help">
          Send ideas directly to oliverkellymain@gmail.com.
        </p>

        <label for="feature-name">Name</label>
        <input id="feature-name" name="name" type="text" maxlength="80" autocomplete="name" />

        <label for="feature-email">Email (optional)</label>
        <input id="feature-email" name="email" type="email" maxlength="120" autocomplete="email" />

        <label for="feature-subject">Subject</label>
        <input
          id="feature-subject"
          name="subject"
          type="text"
          maxlength="120"
          required
          value="Feature request for How Far From Potty"
        />

        <label for="feature-message">Request</label>
        <textarea
          id="feature-message"
          name="message"
          rows="6"
          maxlength="3000"
          required
          placeholder="What feature should we add?"
        ></textarea>

        <p id="feature-request-status" class="feature-status" role="status" aria-live="polite"></p>

        <div class="feature-actions">
          <button type="submit" id="feature-submit">Send request</button>
          <button type="button" id="feature-cancel" class="ghost-button">Cancel</button>
        </div>
      </form>
    </dialog>

    <footer class="footer">
      <p>
        Data sources:
        <a href="https://www.toiletmap.org.uk/dataset" target="_blank" rel="noopener noreferrer">
          The Great British Public Toilet Map (UK)
        </a>
        and
        <a href="https://www.refugerestrooms.org/api/docs/" target="_blank" rel="noopener noreferrer">
          Refuge Restrooms API (US)
        </a>
      </p>
    </footer>

    <script src="./vendor/leaflet/leaflet.js"></script>
    <script type="module" src="./app.js"></script>
  </body>
</html>
